# CF-Link-Proxy

![image](https://github.com/user-attachments/assets/962182e7-d99e-4233-ac30-e130d07a2de5)

---

`CF-Link-Proxy` ÊòØ‰∏Ä‰∏™ÈÉ®ÁΩ≤Âú® Cloudflare Pages ‰∏äÁöÑÂáΩÊï∞ËÑöÊú¨ÔºåÊó®Âú®Êèê‰æõ‰∏Ä‰∏™**ÂÆâÂÖ®„ÄÅÁßÅÂØÜ‰∏îÈ´òÊïà**ÁöÑÁΩëÁªúËØ∑Ê±Ç‰∏≠ÁªßÂ∑•ÂÖ∑„ÄÇÂÆÉ‰∏ç‰ªÖËÉΩÂ∏ÆÂä©Áî®Êà∑Âú®ËÆøÈóÆÁΩëÁªúËµÑÊ∫êÔºàÂ¶Ç‰∏ãËΩΩÈìæÊé•ÔºâÊó∂Ëé∑ÂæóÊõ¥Á®≥ÂÆöÁöÑËøûÊé•‰ΩìÈ™åÔºåËøòÈÄöËøáÂØÜÁ†Å‰øùÊä§Á°Æ‰øù‰∫ÜÊúçÂä°ÁöÑÁßÅÂØÜÊÄß„ÄÇ

#### ‚ú® ‰∏ªË¶ÅÂäüËÉΩ

*   **üõ°Ô∏è ÂØÜÁ†Å‰øùÊä§**: ÈÄöËøáÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆËÆøÈóÆÂØÜÁ†ÅÔºå‰∏∫ÊÇ®ÁöÑ‰ª£ÁêÜÊúçÂä°Êèê‰æõÂÆâÂÖ®‰øùÈöú„ÄÇÊú™È™åËØÅÁöÑËÆøÈóÆÂ∞ÜË¢´Êã¶Êà™ÔºåÁ°Æ‰øùÂè™ÊúâÊÇ®Ëá™Â∑±ËÉΩ‰ΩøÁî®„ÄÇ
*   **üé® Áé∞‰ª£ÂåñÂâçÁ´Ø**: Êèê‰æõ‰∏Ä‰∏™ÁæéËßÇ‰∏îÁî®Êà∑ÂèãÂ•ΩÁöÑÈ¶ñÈ°µÔºåÂåÖÂê´Âä®ÊÄÅÊ∏êÂèòËÉåÊôØ„ÄÅÊöóÈªëÊ®°ÂºèÂàáÊç¢‰ª•Âèä‰æøÊç∑ÁöÑËæìÂÖ•‰ΩìÈ™å„ÄÇ
*   **üìã ‰∏ÄÈîÆÂ§çÂà∂ÈìæÊé•**: Âú®È¶ñÈ°µËæìÂÖ•ÁõÆÊ†áÈìæÊé•ÂêéÔºåÂèØ‰ª•‰∏ÄÈîÆÁîüÊàêÂπ∂Â§çÂà∂ÂÆåÊï¥ÁöÑ‰ª£ÁêÜÈìæÊé•ÔºåÊñπ‰æøÂàÜ‰∫´Âíå‰ΩøÁî®„ÄÇ
*   **üåê ËøûÊé•‰∏≠Áªß‰∏é‰ºòÂåñ**: Âà©Áî® Cloudflare Âº∫Â§ßÁöÑÂÖ®ÁêÉÁΩëÁªú‰Ωú‰∏∫‰∏≠ËΩ¨Ôºå‰ª•ÊúüÊîπÂñÑËøûÊé•ÁöÑÁ®≥ÂÆöÊÄßÂíå‰∏ãËΩΩÁöÑÊåÅÁª≠ÊÄß„ÄÇ
*   **üöÄ Êô∫ËÉΩ URL Â§ÑÁêÜ**: Ëá™Âä®‰∏∫Áî®Êà∑ËæìÂÖ•ÁöÑË£∏ÂüüÂêçÔºàÂ¶Ç `example.com`ÔºâË°•ÂÖ® `https://` ÂçèËÆÆÔºåÂπ∂ËøõË°åÂü∫Á°ÄÁöÑURLÊúâÊïàÊÄßÊ£ÄÊü•„ÄÇ
*   **ü§ù Ë∑®ÂüüÈÄÇÂ∫îÊÄß**: Ëá™Âä®ÂêëÂìçÂ∫î‰∏≠Ê≥®ÂÖ•ÂøÖË¶ÅÁöÑCORSÂ§¥ÈÉ®ÔºàÂ¶Ç `Access-Control-Allow-Origin: *`ÔºâÔºå‰ΩøÂæó‰∏≠ÁªßÁöÑËµÑÊ∫êËÉΩË¢´ËΩªÊùæÈõÜÊàêÂà∞ÂÖ∂‰ªñWebÂ∫îÁî®‰∏≠„ÄÇ
*   **üîß ËØ∑Ê±ÇÂ§¥ÂÆöÂà∂ (È´òÁ∫ß)**: ÂÖÅËÆ∏ÈÄöËøá‰øÆÊîπËÑöÊú¨‰∏≠ÁöÑ `specialCases` ÂØπË±°Ôºå‰∏∫ÊâÄÊúâÊàñÁâπÂÆöÂüüÂêçËá™ÂÆö‰πâ‰º†Âá∫ËØ∑Ê±ÇÁöÑHTTPÂ§¥ÈÉ®„ÄÇ

#### üöÄ ÈÉ®ÁΩ≤‰∏éÈÖçÁΩÆ

Êú¨È°πÁõÆ‰∏ì‰∏∫ Cloudflare Pages ËÆæËÆ°ÔºåÈÉ®ÁΩ≤ËøáÁ®ãÈùûÂ∏∏ÁÆÄÂçï„ÄÇ

1.  **ÂáÜÂ§á‰ª£Á†Å**: Â∞ÜÊú¨È°πÁõÆ‰∏≠ÁöÑ `functions/[[path]].js` Êñá‰ª∂ÊîæÁΩÆÂú®‰Ω†ÁöÑÈ°πÁõÆ‰ªìÂ∫ìÁöÑ `functions` ÁõÆÂΩï‰∏ã„ÄÇ
2.  **ÂàõÂª∫ Pages È°πÁõÆ**:
    *   ÁôªÂΩïÂà∞ Cloudflare Dashboard„ÄÇ
    *   Âú® "Workers & Pages" ‰∏≠ÔºåÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ Pages È°πÁõÆÔºåÂπ∂Â∞ÜÂÖ∂ËøûÊé•Âà∞‰Ω†ÁöÑ‰ª£Á†Å‰ªìÂ∫ì„ÄÇ
    *   ÈÉ®ÁΩ≤ËÆæÁΩÆÂèØ‰ª•‰øùÁïôÈªòËÆ§„ÄÇ
3.  **ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè (ÊúÄÈáçË¶ÅÁöÑ‰∏ÄÊ≠•)**:
    *   Âú®‰Ω†ÁöÑ Pages È°πÁõÆËÆæÁΩÆ‰∏≠ÔºåÊâæÂà∞ **"ËÆæÁΩÆ (Settings)"** > **"ÁéØÂ¢ÉÂèòÈáè (Environment variables)"**„ÄÇ
    *   Âú® **"Áîü‰∫ß (Production)"** ‰∏ãÁÇπÂáª **"Ê∑ªÂä†ÂèòÈáè (Add variable)"**„ÄÇ
    *   **ÂèòÈáèÂêçÁß∞ (Variable name)**: `PASSWORD`
    *   **ÂÄº (Value)**: `ËæìÂÖ•‰Ω†Ëá™Â∑±ÁöÑÂ§çÊùÇÂØÜÁ†Å`
    *   ÁÇπÂáªÂÄºÁöÑËæìÂÖ•Ê°ÜÂè≥‰æßÁöÑ **"Âä†ÂØÜ (Encrypt)"** ÊåâÈíÆÔºåÂ∞ÜÂÖ∂‰øùÂ≠ò‰∏∫ **Secret (Êú∫ÂØÜ)**„ÄÇ
    *   **‰øùÂ≠ò**Âπ∂**ÈáçÊñ∞ÈÉ®ÁΩ≤**‰Ω†ÁöÑÈ°πÁõÆÔºå‰ΩøÁéØÂ¢ÉÂèòÈáèÁîüÊïà„ÄÇ

#### üõ†Ô∏è È´òÁ∫ßÈÖçÁΩÆ: `specialCases`

Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÁ≤æÁªÜÊéßÂà∂‰º†Âá∫ËØ∑Ê±ÇÁöÑHTTPÂ§¥ÈÉ®Ôºà‰æãÂ¶ÇÔºå‰∏∫ÊîØÊåÅÊñ≠ÁÇπÁª≠‰º†ËÄå‰øùÁïô `Range` Â§¥ÔºâÔºåÂèØ‰ª•ÁºñËæë `[[path]].js` Êñá‰ª∂‰∏≠ÁöÑ `specialCases` ÂØπË±°„ÄÇ

**ÈÖçÁΩÆÁ§∫‰æãÁªìÊûÑ**:
```javascript
const specialCases = {
  "*": { // ÈÄöÁî®ËßÑÂàôÔºåÈÄÇÁî®‰∫éÊâÄÊúâÊú™ÊòéÁ°ÆÊåáÂÆöÁöÑÂüüÂêç
    "Origin": "DELETE",     // Âà†Èô§ Origin Â§¥ÈÉ®
    "Referer": "DELETE"     // Âà†Èô§ Referer Â§¥ÈÉ®
  },
  "download.example.com": { // ÈíàÂØπÁâπÂÆöÂüüÂêçÁöÑËßÑÂàô
    "Range": "KEEP"     // ‰øùÁïôÂéüÂßãËØ∑Ê±Ç‰∏≠ÁöÑ Range Â§¥ÈÉ®
  }
};
```
*   `"HeaderName": "DELETE"`: ÁßªÈô§ËØ•Â§¥ÈÉ®„ÄÇ
*   `"HeaderName": "KEEP"`: ‰øùÁïôÂéüÂßãËØ∑Ê±Ç‰∏≠ÁöÑËØ•Â§¥ÈÉ®„ÄÇ
*   `"HeaderName": "SpecificValue"`: Â∞ÜËØ•Â§¥ÈÉ®ÁöÑÂÄºËÆæÁΩÆ‰∏∫ `SpecificValue`„ÄÇ

#### ‚ö†Ô∏è ‰ΩøÁî®È°ªÁü•

*   ËØ∑Á°Æ‰øùÊÇ®ÁöÑ‰ΩøÁî®Ë°å‰∏∫Á¨¶Âêà Cloudflare ÁöÑÊúçÂä°Êù°Ê¨æ„ÄÇ
*   ÂÖçË¥πÂ±ÇÁ∫ßÁöÑÊúçÂä°Âú®ËØ∑Ê±ÇÊ¨°Êï∞„ÄÅCPUÊó∂Èó¥Á≠âÊñπÈù¢Â≠òÂú®ÈôêÂà∂„ÄÇ
*   ÈÉ®ÂàÜÁõÆÊ†áÊúçÂä°Âô®ÂèØËÉΩÂØπÊù•Ëá™‰ª£ÁêÜÁöÑËÆøÈóÆËÆæÊúâÂèçÂà∂Á≠ñÁï•„ÄÇ

---
---

# CF-Link-Proxy (English)

`CF-Link-Proxy` is a Cloudflare Pages Function script designed to provide a **secure, private, and efficient** tool for relaying network requests. It not only helps users achieve a more stable connection experience when accessing network resources (like download links) but also ensures the privacy of the service through password protection.

#### ‚ú® Key Features

*   **üõ°Ô∏è Password Protection**: Secures your proxy service with an access password configured via environment variables. Unauthenticated access is blocked, ensuring only you can use it.
*   **üé® Modern Frontend**: Features a beautiful and user-friendly homepage with a dynamic gradient background, a dark mode toggle, and a convenient input interface.
*   **üìã One-Click Link Copying**: After entering a target URL on the homepage, you can generate and copy the full proxy link with a single click, making it easy to share and use.
*   **üåê Connection Relaying & Optimization**: Leverages Cloudflare's robust global network as an intermediary to potentially improve connection stability and download persistence.
*   **üöÄ Smart URL Handling**: Automatically prepends `https://` to bare domains (e.g., `example.com`) and performs basic URL validity checks.
*   **ü§ù Cross-Origin Adaptability**: Automatically injects necessary CORS headers (such as `Access-Control-Allow-Origin: *`) into responses, facilitating easier integration of relayed resources into other web applications.
*   **üîß Request Header Customization (Advanced)**: Allows fine-tuning of outgoing HTTP headers for all or specific domains by modifying the `specialCases` object in the script.

#### üöÄ Deployment & Configuration

This project is designed for Cloudflare Pages, making deployment straightforward.

1.  **Prepare the Code**: Place the `functions/[[path]].js` file from this project into the `functions` directory of your own repository.
2.  **Create a Pages Project**:
    *   Log in to the Cloudflare Dashboard.
    *   In "Workers & Pages," create a new Pages project and connect it to your code repository.
    *   You can leave the deployment settings as default.
3.  **Configure Environment Variable (The Most Important Step)**:
    *   In your Pages project, navigate to **"Settings"** > **"Environment variables"**.
    *   Under **"Production"**, click **"Add variable"**.
    *   **Variable name**: `PASSWORD`
    *   **Value**: `Enter your own complex password`
    *   Click the **"Encrypt"** button to the right of the value input field to save it as a **Secret**.
    *   **Save** and **re-deploy** your project for the environment variable to take effect.

#### üõ†Ô∏è Advanced Configuration: `specialCases`

If you need to fine-tune the HTTP headers of outgoing requests (e.g., to preserve the `Range` header for resumable downloads), you can edit the `specialCases` object inside the `[[path]].js` file.

**Configuration Structure Example**:
```javascript
const specialCases = {
  "*": { // Default rules, apply to all domains not explicitly specified
    "Origin": "DELETE",     // Deletes the Origin header
    "Referer": "DELETE"     // Deletes the Referer header
  },
  "download.example.com": { // Rules specific to a domain
    "Range": "KEEP"     // Preserves the Range header from the original request
  }
};
```
*   `"HeaderName": "DELETE"`: Removes the specified header.
*   `"HeaderName": "KEEP"`: Preserves the header from the original request.
*   `"HeaderName": "SpecificValue"`: Sets the header's value to `SpecificValue`.

#### ‚ö†Ô∏è Important Considerations

*   Ensure your usage complies with the Cloudflare Terms of Service.
*   Free tiers often have limitations on request counts, CPU time, etc.
*   Some target servers may have policies to block or restrict access from proxies.
